/*
Author: Andrew Seba
Description: Ben's game where robots fight kaiju
*/

#include <gb/gb.h>
#include <stdio.h>
#include <gb/drawing.h>	

unsigned char GipseyD_Sprite[] =
{
	0x00,0x00,0x00,0x00,0x00,0x01,0x01,0x00,
	0x01,0x03,0x01,0x07,0x00,0x3F,0x0F,0x10,
	0x00,0x78,0x10,0xEC,0x08,0xF6,0x76,0x88,
	0x7F,0x81,0x95,0xEB,0x6A,0xFF,0x1C,0xFE,
	0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
	0x00,0x00,0x00,0x00,0x80,0x00,0x80,0x00,
	0x1B,0x14,0x39,0x26,0x73,0x4F,0xE6,0x9F,
	0xCC,0xFF,0xEF,0xBF,0x59,0x7E,0x61,0x7E,
	0xE3,0x1C,0x40,0xBF,0x18,0xE6,0x14,0xEA,
	0x3C,0xC2,0x3C,0xC2,0x94,0xEA,0x88,0xF4,
	0x3D,0x3E,0x07,0x07,0x00,0x00,0x00,0x00,
	0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
	0x80,0xB8,0x00,0x00,0x00,0x00,0x00,0x00,
	0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00
};

unsigned char x_sprite[] =
{
	0x42,0xBD,0xC3,0x3C,0x24,0xDB,0x18,0xE7,
	0x18,0xE7,0x24,0xDB,0xC3,0x3C,0x42,0xBD
};

fixed speed;


fixed spriteX, spriteY; /* Sprite position (fixed point) */

void UpdatePos() {
	//top3
	move_sprite(0, spriteX.b.h, spriteY.b.h);
	move_sprite(1, spriteX.b.h + 8, spriteY.b.h);
	move_sprite(2, spriteX.b.h + 16, spriteY.b.h);
	//middle2
	move_sprite(3, spriteX.b.h, spriteY.b.h + 8);
	move_sprite(4, spriteX.b.h + 8, spriteY.b.h + 8);
	//bottom2
	move_sprite(5, spriteX.b.h, spriteY.b.h + 16);
	move_sprite(6, spriteX.b.h + 8, spriteY.b.h + 16);
}

int main()
{
	UBYTE i;
	while (!0) {
		if (i = J_START)
		{
			break;
		}
	}

	//examples disable stuff to load information into ram.
	display_off();
	disable_interrupts();

	speed.w = 0x00F0UL;
	spriteX.w = 0x1000UL;
	spriteY.w = 0x6000UL;

	//Load in the sprite Sheet
	set_sprite_data(0, 6, GipseyD_Sprite);

	for (i = 0; i <= 6; i++) {
		set_sprite_tile(i, i);
	}

	SHOW_SPRITES;
	DISPLAY_ON;

	enable_interrupts();

	while (!0)
	{
		//Shows almost pixel Position
		//printf("\n %d, %d", spriteX.w, spriteY.w);
		for (i = 0; i < 2; i++)
		{
			wait_vbl_done();
		}


		//UpdateSprite Positions.
		UpdatePos();
		i = joypad();

		//if you hit the a button
		//if (i == J_START) {
		//	speed.w *= 2;
		//}
		if (i & J_RIGHT)
		{
			//change the sprite pos
			spriteX.w += speed.w;
		}

		if (i & J_LEFT)
		{
			//change the sprite pos
			spriteX.w -= speed.w;
		}


	}
	return 0;
}